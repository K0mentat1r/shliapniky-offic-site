<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title></title>
</head>
<body>
    <header id="main-header">
        <a href="index.html" class="link-to-main-site">
            <img src="img/logo.png" class="site-logo">
        </a>
        <div class="header__links">
            <a href="#section-hello" class="links__links-to-sect">НАЧАЛО</a>
            <a href="#section-about" class="links__links-to-sect">О НАС</a>
            <a href="#section-hall-of-fame" class="links__links-to-sect">ДОСКА ПОЧЕТА</a>
            <a href="#section-how-to-come-in" class="links__links-to-sect">КАК ВСТУПИТЬ</a>
            <!-- <a href="#" class="links__links-to-sect">НОВОСТИ</a> -->
            <a href="#section-FAQ" class="links__links-to-sect">FAQ</a>
        </div>
        <div class="burger-menu">
            <svg width="35" height="25" viewBox="0 0 65 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 22H64.5M0 3H64.5M0 43.5H64.5" stroke="#F4F2D7" stroke-width="5"/>
            </svg>
        </div>
    </header>
    <header id="second-header">
        <a href="index.html" class="link-to-main-site">
            <img src="img/logo.png" class="site-logo">
        </a>
        <div class="header__links">
            <a href="#section-hello" class="links__links-to-sect">НАЧАЛО</a>
            <a href="#section-about" class="links__links-to-sect">О НАС</a>
            <a href="#section-hall-of-fame" class="links__links-to-sect">ДОСКА ПОЧЕТА</a>
            <a href="#section-how-to-come-in" class="links__links-to-sect">КАК ВСТУПИТЬ</a>
            <!-- <a href="#" class="links__links-to-sect">НОВОСТИ</a> -->
            <a href="#section-FAQ" class="links__links-to-sect">FAQ</a>
        </div>
        <div class="burger-menu">
            <svg width="35" height="25" viewBox="0 0 65 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 22H64.5M0 3H64.5M0 43.5H64.5" stroke="#F4F2D7" stroke-width="5"/>
            </svg>
        </div>
    </header>
    <div id="menu">
        <div id="menuContainer">
            <div id="menuBody">

            </div>
        </div>
    </div>
    <main>
        <div class="grid-left"></div>
        <div class="grid-center">
            <article class="section" id="section-hello">
                <img src="img/all_photo.png" class="section-hello__img">
                <h3 class="section-hello__text">
                    Добро пожаловать на сайт клана ”Шляпники”! Здесь вы можете ознакомится с нашим кланом и узнать о нем больше и, возможно, вступить.
                </h3>
            </article>
            <article class="section" id="section-about">
                <div class="section-left">
                    <h1 class="section-about__name">
                        о нас
                    </h1>
                    <p class="section-about__text">
                        Клан Шляпники - это не просто клан, это место где люди общаются, развиваются, строят, проводят ивенты и не только.
                        На данный момент количество участников превышает более 30 человек
                    </p>
                </div>
                <figure class="section-right">
                    <img src="img/mascot.png" class="section-about__img">
                    <figcaption class="section-about__about-img">НАШ МАСКОТ</figcaption>
                </figure>
            </article>
            <article class="section" id="section-why-we">
                <h1 class="section__name">почему нужно выбрать наш клан</h1>
                <ul class="section__list">
                    <li><p class="section__text">Много различных ферм, на которых вы можете безгранично фармить опыт и ресурсы.</p></li>
                    <li><p class="section__text">Активные игроки в клане.</p></li>
                    <li><p class="section__text">Полезные моды и ресурс паки, которые украшают и оптимизируют игру.</p></li>
                    <li><p class="section__text">Интересные ивенты которые проводят участники нашего клана, в которых вы можете поучаствовать или даже сделать свой.</p></li>
                    <li><p class="section__text">Много различных целей, до которых мы доходим вместе!</p></li>
                </ul>
            </article>
            <article class="section" id="section-hall-of-fame">
                <h1 class="section__name">доска почета</h1>
                <div class="columns-3_rows-3">
                    <section class="section-HOF__sub-section section__row1" id="sub-section-PWG">
                        <h4 class="section__player-name">PWGood_</h4>
                        <img src="img/PWGood_head.png" id="pwGoood_" class="section__player-head">
                        <p class="section__about-player">глава клана</p>
                    </section>
                    <section class="section-HOF__sub-section section__row1" id="sub-section-Ini">
                        <h4 class="section__player-name">ini_ga</h4>
                        <img src="" id="ini_ga" class="section__player-head">
                        <p class="section__about-player">дизайн сайта и его создание</p>
                    </section>
                    <section class="section-HOF__sub-section section__row1" id="sub-section-Fut">
                        <h4 class="section__player-name">Future</h4>
                        <img src="" id="future" class="section__player-head">
                        <p class="section__about-player">оформление деревни, созднание кланового трейд холла</p>
                    </section>
                    <section class="section-HOF__sub-section section__row2" id="sub-section-Omo">
                        <h4 class="section__player-name">OMOGUAS</h4>
                        <img src="img/omoguas_head.png" id="omoguas" class="section__player-head">
                        <p class="section__about-player">Созднание кланового трейд холла, создание арта</p>
                    </section>
                    <section class="section-HOF__sub-section section__row2" id="sub-section-Kap">
                        <h4 class="section__player-name">KAPTOTOXA</h4>
                        <img src="" id="kaptotoxa" class="section__player-head">
                        <p class="section__about-player">создание фермы рейда</p>
                    </section>
                    <section class="section-HOF__sub-section section__row2" id="sub-section-Dar">
                        <h4 class="section__player-name">DarkFoal</h4>
                        <img src="img/DarkFoal_head.png" id="darkfoal" class="section__player-head">
                        <p class="section__about-player">оформление клана в дискорде</p>
                    </section>
                    <section class="section-HOF__sub-section section__row3" id="sub-section-Bli">
                        <h4 class="section__player-name">BLINKS10</h4>
                        <img src="img/blinks_head.png" id="blinks10" class="section__player-head">
                        <p class="section__about-player">добыча ресурсов и оформление деревни</p>
                    </section>
                    <section class="section-HOF__sub-section section__row3" id="sub-section-Puh">
                        <h4 class="section__player-name">Puha</h4>
                        <img src="img/puha_head.png" id="puha" class="section__player-head">
                        <p class="section__about-player">создание арта, добыча ресурсов</p>
                    </section>
                    <section class="section-HOF__sub-section section__row3" id="sub-section-Fil">
                        <h4 class="section__player-name">FILIN201077</h4>
                        <img src="img/filin_head.png" id="filin" class="section__player-head">
                        <p class="section__about-player">волонтерство</p>
                    </section>
                </div>
            </article>
            <article class="section" id="section-how-to-come-in">
                <h1 class="section__name">как попасть в наш клан</h1>
                <a href="https://discord.gg/rwvFzRJJ" target="_blank">
                    <button id="discord-invite">
                        <img src="img/discord-logo.png" class="button__discord-logo">
                        <p class="button__text">вcтупить в клан</p>
                    </button>
                </a>
                <p class="section__text">
                    1.Вступить в дискорд клана (кнопка выше)<br>
                    2.Открыть канал с заявками в клан <br>
                    3.Открыть тикет <br>
                    4.Ответить на вопросы
                </p>
            </article> 
            <article class="section" id="section-allies">
                <h1 class="section__name">наши союзники</h1>
                <p class="section__text">Гильдия банкиров (ГБ)</p>
                <p class="section__text">Семья</p>
            </article>
            <article class="section" id="section-FAQ">
                <h1 class="section__name">
                    часто задаваемые вопросы
                </h1>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Какие требования для принятия в клан?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Главные требования: ваша активность и умение творить. Мы ценим творчество каждого нашего участника от кусочка земли до огромного небоскреба
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Можно с бедрока вступить в клан?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Начиная с 3 июля 2024 года игроки с Bedrock Edition (телефонное издание) не принимаются, бывают исключения
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">У вас в клане настоящий пугод?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        PWGoood_ не является тем известным лицом о котором вы думаете
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">У клана есть своя клан база?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Клан “Шляпники“ имеет множество территорий, в том числе и ферм. На данный момент у нас имеется две официальные клановые базы
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Обязательно жить на базе клана?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Нет, если ваши предпочтения складываются на другую территорию, вы можете жить где хотите
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Могу ли я состоять в двух кланах?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Нет, ваша позиция должна быть только в нашем клане
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Сколько нужно играть на сервере чтобы вступить в клан?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Нужно играть на этом сервере минимум 2 недели
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">У вас есть правила клана?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Да, они у нас есть и расписаны в отдельном канале. Вступая в клан, вы обязаны их изучить
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Если я не смогу сидеть в голосовом чате, то я смогу попасть к вам в клан?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Да, в таком случае вступить можно. У нас есть новостной канал
                    </p>
                </section>
                <section class="section-FAQ__sub-section" onclick="">
                    <div class="sub-section__header">
                        <h2 class="sub-section__question">Как узнать координаты всех ваших активностей?</h2>
                        <img src="img/icon_arrowUp.svg" class="sub-section__open" id="">
                    </div>
                    <p class="section__text sub-section_answer">
                        Все координаты клана будут указаны при принятии заявки
                    </p>
                </section>
            </article>
        </div>
        <div class="grid-right"></div>
    </main>
    <footer>
        
    </footer>
</body>
<script>
    const sub_section = document.getElementsByClassName("section-FAQ__sub-section");
    const btnClose = document.getElementsByClassName("sub-section__open");
    const sectionBody = document.getElementsByClassName("sub-section_answer");
    const sectionHeader = document.getElementsByClassName("sub-section__header");
    //переменные размеров
    let categoryStyleInfo = {};
    //переменные boolean
    let IsGetCatHeight = false;
    //счетчик
    let headerNum = 0;
    let catHeaderHeight = 62;
    let maxCatHeaderHeight = 62;
    let wasHeaderNum = 0;
    let CatClosesFirstTime = true;
    
    let checkSectionHeaderHeight = function(headerHeight){
        if (headerHeight > catHeaderHeight){
            maxCatHeaderHeight = headerHeight;
            return maxCatHeaderHeight;
        }
        else{
            return catHeaderHeight;
        }
    }

    function getCategoryHeight(){
        for (let i = 0; i < sub_section.length; i++){
            categoryStyleInfo[i + "_height"] = sub_section[i].offsetHeight - 20;
            categoryStyleInfo[i + "_headerHeight"] = checkSectionHeaderHeight(sectionHeader[i].offsetHeight);
            categoryStyleInfo[i + "_isOpen"] = false;
            sub_section.item(i).style.height = sectionHeader[i].offsetHeight + "px";
            sectionBody[i].style.display = "none";
            // sectionHeader[i].style.borderRadius = "15px";
        }
    }
    // getCategoryHeight();
    function categoryAnim({timing, draw, duration}) {

        let start = performance.now();

        requestAnimationFrame(function categoryAnim(time) {
        // timeFraction изменяется от 0 до 1
            let timeFraction = (time - start) / duration;
            if (timeFraction > 1) timeFraction = 1;
            // вычисление текущего состояния анимации
            let progress = timing(timeFraction);
            draw(progress); // отрисовать её
            if (timeFraction < 1) {
                requestAnimationFrame(categoryAnim);
            }
        });
    }
    function makeEaseOut(timing) {
      return function(timeFraction) {
        return 1 - timing(1 - timeFraction);
      }
    }
    function subAnim(timeFraction) {
        return Math.pow(timeFraction, 2);;
    }
    let EaseOut = makeEaseOut(subAnim);

    function onAnimCat(numOfCategory){
        sectionBody[numOfCategory].style.display = "block";
        categoryAnim({
            duration: 1000,
            timing: EaseOut,
            draw: function(progress) {
                if (progress * categoryStyleInfo[numOfCategory + "_height"] > categoryStyleInfo[numOfCategory + "_headerHeight"]){
                    sub_section[numOfCategory].style.height = progress * categoryStyleInfo[numOfCategory + "_height"] + "px";
                }
            }
        });
    }

    function onRevAnimCat(numOfCategory){
        categoryAnim({
            duration: 500,
            timing: subAnim,
            draw: function(progress) {
                sub_section[numOfCategory].style.height = categoryStyleInfo[numOfCategory + "_height"]  - progress * (categoryStyleInfo[numOfCategory + "_height"] - categoryStyleInfo[numOfCategory + "_headerHeight"]) + "px";
            }
        });
        sectionBody[numOfCategory].style.display = "none";
    }
    function animCategoryOpen(num){
        sectionBody[num].classList.remove("onRevAnimSubCat");
        btnClose[num].classList.remove("onRevAnimCloseCat")

        onAnimCat(num);
        sectionBody[num].classList.add("onAnimSubCat");
        btnClose[num].classList.add("onAnimCloseCat");
    }
    function animCategoryClose(num){
        sectionBody[num].classList.remove("onAnimSubCat");
        btnClose[num].classList.remove("onAnimCloseCat")

        onRevAnimCat(num);
        sectionBody[num].classList.add("onRevAnimSubCat");
        btnClose[num].classList.add("onRevAnimCloseCat")
    }
    function onAnimations(){
        if (categoryStyleInfo[headerNum + "_isOpen"] == false){
            animCategoryOpen(headerNum);
            categoryStyleInfo[headerNum + "_isOpen"] = true;
        }
        else{
            animCategoryClose(headerNum);
            categoryStyleInfo[headerNum + "_isOpen"] = false;
        }
    } //возможно придется переделывать, как решим
    function getHeaderNum(num){
        headerNum=num;
        onAnimations();
    }
    getCategoryHeight();
    for (let j = 0; j < btnClose.length; j++){
        let a = j;
        btnClose[j].addEventListener("click", ()=>{
            getHeaderNum(a);
        });
    }
</script>
<script>
    let userWinPos = 0;

    const openMenu = document.getElementsByClassName("burger-menu");
    const elemMain = document.querySelector("main");
    const windowHeight = document.documentElement.offsetHeight;
    const secondHeader = document.getElementById("second-header");
    const menu = document.getElementById("menu");
    const menuContainer = document.getElementById("menuContainer");

    let IsSecHeader = false;
    let wasIsSecHeader = false;
    let stopScrolling = false; //остановить прокрутку?

    let elemMainHeight = elemMain.clientHeight;
    let elemMainTop = windowHeight - elemMainHeight;

    let userInf = navigator.userAgent;
    let MaybePC = false;
    var IsPC = true;
    let menuOpen = false;
    let numOfBurger = 0;

    if (window.innerWidth / window.innerHeight > 0.8){
        MaybePC = true;
        console.log("Возможно, пользователь зашел с пк");
        if ((userInf.includes("Win") || userInf.includes("Linux")) && !userInf.includes("Android") || userInf.includes("Macbook")){
            IsPC = true;
            console.log("Пользователь зашел с пк");
        }
        else{
            MaybePC = false;
            IsPC = false;
            console.log("Пользователь зашел с мобильного устройства");
        }
    }
    else{
        IsPC = false;
        console.log("Пользователь зашел с мобильного устройства");
    }
    function offPopUp(num){
        numOfRepeatOnPopUp=0;
        menuOpen = false;
        stopScrolling=false;
        menuOpen=false;
        menuBody.classList.remove("onPop-up");
        menuBody.classList.add("offPop-up");
        setTimeout(()=>{menu.style.display="none";},500);
    }
    let numOfRepeatOnPopUp = 0;
    function onPopUp(num){
        numOfRepeatOnPopUp++;
        numOfBurger = num;
        stopScrolling = true;
        menuBody.classList.remove("offPop-up");
        menuBody.classList.add("onPop-up");
        menu.style.display="block";
        if (!menuOpen){
            menuOpen=true;
        }
        else if (menuOpen && numOfRepeatOnPopUp !=2 && numOfRepeatOnPopUp < 2){ //без такого условия меню может закрываться сразу после открытия, что и с ним вполне возможно, но шанс меньше
            offPopUp(num);
        }
        else{
            numOfRepeatOnPopUp = 0;
        }
    }

    function isHeader2Visible() {
        let paddingTop = 100; //прибавляется к результату (высчитывается где начало <main>)
        // проверка, где второй хидер
        return (
            userWinPos <= elemMainTop + paddingTop
        );
    }
    function getNewEventListener(){
        if (IsSecHeader){
            openMenu[1].addEventListener("click", () => onPopUp(1));
            openMenu[0].removeEventListener("click", function(){});
        }
        else{
            openMenu[0].addEventListener("click", () => onPopUp(0));
            openMenu[1].removeEventListener("click", function(){});
        }
        
    }
    function checkVisibleMainHeader(){
        // Проверяем его видимость
        if (!isHeader2Visible()) { //не видно пользователю основной хидер  
            IsSecHeader = false;
            secondHeader.style.display="flex";

        } else { //видно
            IsSecHeader = true;
            secondHeader.style.display="none";
        }
        if (wasIsSecHeader != IsSecHeader){ //если поменялся хидер
            getNewEventListener();
        }
        wasIsSecHeader = IsSecHeader;
    }
    checkVisibleMainHeader();
    let wasUserWinPos = 0; //нужно, чтобы если открылось вспл. окно запомнить последнюю позицию по y
    window.onscroll = function(){
        userWinPos = window.scrollY; 
        if (!stopScrolling){
            wasUserWinPos = userWinPos;
            // smoothScroll();
        }
        else{
            window.scrollTo(0, wasUserWinPos); //блокируем прокрутку, если открыто вспл. окно
        }
        checkVisibleMainHeader();
    };

</script>
<script></script>
</html>